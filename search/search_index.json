{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"D\u00e9ployer Traccar avec Docker et MySQL Ce d\u00e9p\u00f4t propose un exemple de stack Docker pour Traccar utilisant MySQL comme base de donn\u00e9es, un tunnel Cloudflare et un conteneur d\u2019auto-heal. Un fichier docker-compose.example.yml est fourni pour \u00e9viter le copier-coller. Pr\u00e9requis Docker et Docker Compose install\u00e9s sur l\u2019h\u00f4te Acc\u00e8s \u00e0 un domaine g\u00e9r\u00e9 par Cloudflare (pour le tunnel) Installer Docker/Docker Compose sur Ubuntu (22.04 ou plus r\u00e9cent) 1) D\u00e9sinstaller les anciens paquets si pr\u00e9sents : sudo apt remove docker docker-engine docker.io containerd runc 2) Installer les d\u00e9pendances et ajouter la cl\u00e9 GPG officielle : sudo apt update sudo apt install -y ca-certificates curl gnupg sudo install -m 0755 -d /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg sudo chmod a+r /etc/apt/keyrings/docker.gpg 3) Ajouter le d\u00e9p\u00f4t Docker et installer le moteur avec le plugin Compose : echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo \"$VERSION_CODENAME\") stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null sudo apt update sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin 4) V\u00e9rifier que Docker et Compose fonctionnent : sudo docker run --rm hello-world docker compose version 5) (Optionnel) Autoriser l\u2019utilisateur courant \u00e0 utiliser Docker sans sudo : sudo usermod -aG docker $USER newgrp docker 1. Pr\u00e9parer le fichier de composition Copiez l\u2019exemple et adaptez-le si n\u00e9cessaire (chemins de volumes, ports, options MySQL, etc.) : cp docker-compose.example.yml docker-compose.yml L\u2019exemple utilise : - MySQL 8.4 ( traccar / traccar ) avec les options JDBC recommand\u00e9es pour Traccar - Traccar ( traccar/traccar:latest ) expos\u00e9 sur le port 8082 et la plage 5000-5500 - cloudflared en mode tunnel token - autoheal pour relancer les conteneurs marqu\u00e9s unhealthy 2. Cr\u00e9er le fichier .env Dans le m\u00eame dossier que docker-compose.yml , cr\u00e9ez un .env contenant votre token Cloudflare : TUNNEL_TOKEN=<TOKEN_TRES_LONG> Le token est fourni par Cloudflare lors de la cr\u00e9ation du tunnel (voir \u00e9tape suivante). 3. Cr\u00e9er le tunnel Cloudflare Sur le dashboard Cloudflare, assurez-vous que votre domaine (ex. edxo.ca ) est g\u00e9r\u00e9 par Cloudflare. Rendez-vous dans Zero Trust \u2192 Networks \u2192 Tunnels puis Add a tunnel / Create a tunnel . Choisissez Docker comme m\u00e9thode d\u2019installation et notez le token fourni apr\u00e8s --token . Ajoutez un Public hostname pointant vers http://traccar:8082 (le nom du service Docker). Collez le token dans .env sous TUNNEL_TOKEN . 4. D\u00e9marrer les services Depuis le dossier contenant docker-compose.yml et .env : sudo mkdir -p /opt/traccar/data /opt/traccar/logs # Lancer la stack en arri\u00e8re-plan docker compose up -d V\u00e9rifier les journaux si besoin : docker compose ps docker compose logs -f traccar docker compose logs -f cloudflared 5. Acc\u00e9der \u00e0 Traccar Une fois que Traccar est en \u00e9tat healthy et que cloudflared tourne, acc\u00e9dez \u00e0 l\u2019interface via l\u2019URL configur\u00e9e dans Cloudflare (ex. https://gps.edxo.ca ). 6. Notes utiles Vous pouvez retirer le mapping 8082:8082 pour n\u2019exposer Traccar que via Cloudflare. Pour plusieurs sous-domaines, ajoutez plusieurs r\u00e8gles d\u2019ingress dans le tunnel Cloudflare. autoheal relance automatiquement les conteneurs marqu\u00e9s unhealthy via les healthchecks.","title":"Accueil"},{"location":"#deployer-traccar-avec-docker-et-mysql","text":"Ce d\u00e9p\u00f4t propose un exemple de stack Docker pour Traccar utilisant MySQL comme base de donn\u00e9es, un tunnel Cloudflare et un conteneur d\u2019auto-heal. Un fichier docker-compose.example.yml est fourni pour \u00e9viter le copier-coller.","title":"D\u00e9ployer Traccar avec Docker et MySQL"},{"location":"#prerequis","text":"Docker et Docker Compose install\u00e9s sur l\u2019h\u00f4te Acc\u00e8s \u00e0 un domaine g\u00e9r\u00e9 par Cloudflare (pour le tunnel)","title":"Pr\u00e9requis"},{"location":"#installer-dockerdocker-compose-sur-ubuntu-2204-ou-plus-recent","text":"1) D\u00e9sinstaller les anciens paquets si pr\u00e9sents : sudo apt remove docker docker-engine docker.io containerd runc 2) Installer les d\u00e9pendances et ajouter la cl\u00e9 GPG officielle : sudo apt update sudo apt install -y ca-certificates curl gnupg sudo install -m 0755 -d /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg sudo chmod a+r /etc/apt/keyrings/docker.gpg 3) Ajouter le d\u00e9p\u00f4t Docker et installer le moteur avec le plugin Compose : echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo \"$VERSION_CODENAME\") stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null sudo apt update sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin 4) V\u00e9rifier que Docker et Compose fonctionnent : sudo docker run --rm hello-world docker compose version 5) (Optionnel) Autoriser l\u2019utilisateur courant \u00e0 utiliser Docker sans sudo : sudo usermod -aG docker $USER newgrp docker","title":"Installer Docker/Docker Compose sur Ubuntu (22.04 ou plus r\u00e9cent)"},{"location":"#1-preparer-le-fichier-de-composition","text":"Copiez l\u2019exemple et adaptez-le si n\u00e9cessaire (chemins de volumes, ports, options MySQL, etc.) : cp docker-compose.example.yml docker-compose.yml L\u2019exemple utilise : - MySQL 8.4 ( traccar / traccar ) avec les options JDBC recommand\u00e9es pour Traccar - Traccar ( traccar/traccar:latest ) expos\u00e9 sur le port 8082 et la plage 5000-5500 - cloudflared en mode tunnel token - autoheal pour relancer les conteneurs marqu\u00e9s unhealthy","title":"1. Pr\u00e9parer le fichier de composition"},{"location":"#2-creer-le-fichier-env","text":"Dans le m\u00eame dossier que docker-compose.yml , cr\u00e9ez un .env contenant votre token Cloudflare : TUNNEL_TOKEN=<TOKEN_TRES_LONG> Le token est fourni par Cloudflare lors de la cr\u00e9ation du tunnel (voir \u00e9tape suivante).","title":"2. Cr\u00e9er le fichier .env"},{"location":"#3-creer-le-tunnel-cloudflare","text":"Sur le dashboard Cloudflare, assurez-vous que votre domaine (ex. edxo.ca ) est g\u00e9r\u00e9 par Cloudflare. Rendez-vous dans Zero Trust \u2192 Networks \u2192 Tunnels puis Add a tunnel / Create a tunnel . Choisissez Docker comme m\u00e9thode d\u2019installation et notez le token fourni apr\u00e8s --token . Ajoutez un Public hostname pointant vers http://traccar:8082 (le nom du service Docker). Collez le token dans .env sous TUNNEL_TOKEN .","title":"3. Cr\u00e9er le tunnel Cloudflare"},{"location":"#4-demarrer-les-services","text":"Depuis le dossier contenant docker-compose.yml et .env : sudo mkdir -p /opt/traccar/data /opt/traccar/logs # Lancer la stack en arri\u00e8re-plan docker compose up -d V\u00e9rifier les journaux si besoin : docker compose ps docker compose logs -f traccar docker compose logs -f cloudflared","title":"4. D\u00e9marrer les services"},{"location":"#5-acceder-a-traccar","text":"Une fois que Traccar est en \u00e9tat healthy et que cloudflared tourne, acc\u00e9dez \u00e0 l\u2019interface via l\u2019URL configur\u00e9e dans Cloudflare (ex. https://gps.edxo.ca ).","title":"5. Acc\u00e9der \u00e0 Traccar"},{"location":"#6-notes-utiles","text":"Vous pouvez retirer le mapping 8082:8082 pour n\u2019exposer Traccar que via Cloudflare. Pour plusieurs sous-domaines, ajoutez plusieurs r\u00e8gles d\u2019ingress dans le tunnel Cloudflare. autoheal relance automatiquement les conteneurs marqu\u00e9s unhealthy via les healthchecks.","title":"6. Notes utiles"},{"location":"configuration_cloudflare/","text":"Configuration de Cloudflare avec des Tunnels La configuration de Cloudflare est essentielle pour s\u00e9curiser et optimiser l'acc\u00e8s \u00e0 votre serveur Traccar. L'utilisation de Cloudflare Tunnels est particuli\u00e8rement avantageuse pour exposer des services internes de mani\u00e8re s\u00e9curis\u00e9e sans ouvrir de ports sur votre pare-feu. Pr\u00e9requis Un compte Cloudflare actif. Un nom de domaine enregistr\u00e9 et g\u00e9r\u00e9 par Cloudflare. Un serveur Linux avec Traccar install\u00e9 et fonctionnant (g\u00e9n\u00e9ralement sur localhost:8082 ). Qu'est-ce que Cloudflare Tunnel ? Cloudflare Tunnel (anciennement Argo Tunnel) cr\u00e9e une connexion s\u00e9curis\u00e9e et chiffr\u00e9e entre votre serveur et le r\u00e9seau Cloudflare, sans qu'il soit n\u00e9cessaire d'ouvrir des ports entrants sur votre pare-feu. Votre serveur initie la connexion sortante vers Cloudflare, ce qui rend l'exposition de services beaucoup plus s\u00e9curis\u00e9e. 1. Installation de cloudflared sur votre serveur cloudflared est le d\u00e9mon client de Cloudflare Tunnel. T\u00e9l\u00e9chargez cloudflared : Pour les syst\u00e8mes bas\u00e9s sur Debian/Ubuntu : bash curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o /usr/local/bin/cloudflared Adaptez l'URL de t\u00e9l\u00e9chargement \u00e0 votre architecture si n\u00e9cessaire (par exemple, arm64 pour Raspberry Pi). Rendez l'ex\u00e9cutable : bash sudo chmod +x /usr/local/bin/cloudflared V\u00e9rifiez l'installation : bash cloudflared --version 2. Authentification de cloudflared avec votre compte Cloudflare Cette \u00e9tape va lier cloudflared \u00e0 votre compte Cloudflare et g\u00e9n\u00e9rer un certificat. Lancez la commande d'authentification : bash cloudflared tunnel login Une URL s'affichera dans votre terminal. Copiez-la et ouvrez-la dans votre navigateur web. Connectez-vous \u00e0 votre compte Cloudflare et s\u00e9lectionnez le domaine que vous souhaitez utiliser pour le tunnel. Une fois l'authentification r\u00e9ussie, un fichier de certificat ( cert.pem ) sera t\u00e9l\u00e9charg\u00e9 et stock\u00e9 dans le r\u00e9pertoire par d\u00e9faut de cloudflared (g\u00e9n\u00e9ralement ~/.cloudflared/ ). 3. Cr\u00e9ation et configuration du Tunnel Cr\u00e9ez un nouveau tunnel : Donnez un nom unique \u00e0 votre tunnel (par exemple, traccar-tunnel ). bash cloudflared tunnel create traccar-tunnel Cette commande va cr\u00e9er le tunnel et g\u00e9n\u00e9rer un ID de tunnel (UUID) et un fichier de configuration pour celui-ci (par exemple, ~/.cloudflared/<UUID>.json ). Cr\u00e9ez un fichier de configuration pour le tunnel ( config.yml ) : Ce fichier indique \u00e0 cloudflared comment acheminer le trafic. Cr\u00e9ez-le dans le m\u00eame r\u00e9pertoire que votre certificat ( ~/.cloudflared/ ) ou dans un r\u00e9pertoire d\u00e9di\u00e9 au tunnel (par exemple, /etc/cloudflared/traccar-tunnel/ ). ```yaml ~/.cloudflared/config.yml ou /etc/cloudflared/traccar-tunnel/config.yml tunnel: credentials-file: /root/.cloudflared/ .json ingress: # R\u00e8gle pour l'interface web de Traccar (port 8082) - hostname: traccar. service: http://localhost:8082 originRequest: noTLSVerify: true # Utilisez cette option si Traccar est en HTTP local # Ou configurez HTTPS sur Traccar si vous avez un certificat local valide # R\u00e8gle pour le port des appareils GPS (ex: OsmAnd sur 5055) # Il faut exposer ce port directement, car Cloudflare ne proxyfie pas les ports non-HTTP/HTTPS par d\u00e9faut # Pour exposer des ports non-HTTP/HTTPS via Tunnel, il faut utiliser Cloudflare Spectrum (payant) # Une solution plus simple est de ne pas proxyfier ce sous-domaine via Cloudflare (nuage gris) - hostname: gps. service: tcp://localhost:5055 # Exemple pour OsmAnd # Si vous exposez directement (sans proxy Cloudflare) ce sous-domaine (gps.YOUR_DOMAIN.COM) # vers votre IP, il n'y a pas besoin de r\u00e8gle d'ingress ici pour le port 5055. # Le tunnel est principalement pour le trafic HTTP/HTTPS. service: http_status:404 ``` Remplacez <YOUR_TUNNEL_UUID> par l'ID de votre tunnel et <YOUR_DOMAIN.COM> par votre nom de domaine. 4. Configuration DNS dans Cloudflare Pour que votre sous-domaine pointe vers votre tunnel, vous devez cr\u00e9er un enregistrement CNAME dans votre tableau de bord Cloudflare. Connectez-vous \u00e0 votre tableau de bord Cloudflare. S\u00e9lectionnez votre nom de domaine. Dans le menu de gauche, allez dans la section DNS . Cliquez sur Ajouter un enregistrement ( Add record ). Type : CNAME Nom : traccar (ou le nom de votre sous-domaine) Cible : L'adresse fournie par cloudflared lors de la cr\u00e9ation du tunnel. Elle se termine g\u00e9n\u00e9ralement par cfargotunnel.com . Par exemple, abcd.cfargotunnel.com . Proxy status : Assurez-vous que le nuage orange est activ\u00e9 (Proxied). Cliquez sur Enregistrer . Note : Si vous exposez des ports non-HTTP/HTTPS (comme 5055 pour les appareils GPS) sans Cloudflare Spectrum, vous devrez cr\u00e9er un enregistrement A pointant directement vers votre IP de serveur pour un sous-domaine comme gps.YOUR_DOMAIN.COM , et vous assurer que ce sous-domaine n'est pas proxyfi\u00e9 (nuage gris). 5. Ex\u00e9cution de cloudflared comme service syst\u00e8me Pour que votre tunnel reste actif, m\u00eame apr\u00e8s un red\u00e9marrage du serveur, ex\u00e9cutez cloudflared en tant que service syst\u00e8me. Installez le service : bash sudo cloudflared tunnel install D\u00e9marrez le service : bash sudo systemctl start cloudflared V\u00e9rifiez le statut du service : bash sudo systemctl status cloudflared Assurez-vous qu'il d\u00e9marre au boot : bash sudo systemctl enable cloudflared Conclusion Votre serveur Traccar est maintenant accessible de mani\u00e8re s\u00e9curis\u00e9e via Cloudflare Tunnel. Cette configuration offre une couche de s\u00e9curit\u00e9 suppl\u00e9mentaire en masquant l'adresse IP de votre serveur et en utilisant les protections DDoS et le pare-feu applicatif web (WAF) de Cloudflare. N'oubliez pas de mettre \u00e0 jour votre /opt/traccar/conf/traccar.xml pour que Traccar \u00e9coute sur localhost si ce n'est pas d\u00e9j\u00e0 le cas, et configurez vos appareils GPS pour qu'ils pointent vers traccar.<YOUR_DOMAIN.COM> (ou gps.<YOUR_DOMAIN.COM> si vous avez configur\u00e9 un sous-domaine non proxyfi\u00e9 pour les ports non-HTTP/HTTPS).","title":"Configuration de Cloudflare"},{"location":"configuration_cloudflare/#configuration-de-cloudflare-avec-des-tunnels","text":"La configuration de Cloudflare est essentielle pour s\u00e9curiser et optimiser l'acc\u00e8s \u00e0 votre serveur Traccar. L'utilisation de Cloudflare Tunnels est particuli\u00e8rement avantageuse pour exposer des services internes de mani\u00e8re s\u00e9curis\u00e9e sans ouvrir de ports sur votre pare-feu.","title":"Configuration de Cloudflare avec des Tunnels"},{"location":"configuration_cloudflare/#prerequis","text":"Un compte Cloudflare actif. Un nom de domaine enregistr\u00e9 et g\u00e9r\u00e9 par Cloudflare. Un serveur Linux avec Traccar install\u00e9 et fonctionnant (g\u00e9n\u00e9ralement sur localhost:8082 ).","title":"Pr\u00e9requis"},{"location":"configuration_cloudflare/#quest-ce-que-cloudflare-tunnel","text":"Cloudflare Tunnel (anciennement Argo Tunnel) cr\u00e9e une connexion s\u00e9curis\u00e9e et chiffr\u00e9e entre votre serveur et le r\u00e9seau Cloudflare, sans qu'il soit n\u00e9cessaire d'ouvrir des ports entrants sur votre pare-feu. Votre serveur initie la connexion sortante vers Cloudflare, ce qui rend l'exposition de services beaucoup plus s\u00e9curis\u00e9e.","title":"Qu'est-ce que Cloudflare Tunnel ?"},{"location":"configuration_cloudflare/#1-installation-de-cloudflared-sur-votre-serveur","text":"cloudflared est le d\u00e9mon client de Cloudflare Tunnel. T\u00e9l\u00e9chargez cloudflared : Pour les syst\u00e8mes bas\u00e9s sur Debian/Ubuntu : bash curl -L https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64 -o /usr/local/bin/cloudflared Adaptez l'URL de t\u00e9l\u00e9chargement \u00e0 votre architecture si n\u00e9cessaire (par exemple, arm64 pour Raspberry Pi). Rendez l'ex\u00e9cutable : bash sudo chmod +x /usr/local/bin/cloudflared V\u00e9rifiez l'installation : bash cloudflared --version","title":"1. Installation de cloudflared sur votre serveur"},{"location":"configuration_cloudflare/#2-authentification-de-cloudflared-avec-votre-compte-cloudflare","text":"Cette \u00e9tape va lier cloudflared \u00e0 votre compte Cloudflare et g\u00e9n\u00e9rer un certificat. Lancez la commande d'authentification : bash cloudflared tunnel login Une URL s'affichera dans votre terminal. Copiez-la et ouvrez-la dans votre navigateur web. Connectez-vous \u00e0 votre compte Cloudflare et s\u00e9lectionnez le domaine que vous souhaitez utiliser pour le tunnel. Une fois l'authentification r\u00e9ussie, un fichier de certificat ( cert.pem ) sera t\u00e9l\u00e9charg\u00e9 et stock\u00e9 dans le r\u00e9pertoire par d\u00e9faut de cloudflared (g\u00e9n\u00e9ralement ~/.cloudflared/ ).","title":"2. Authentification de cloudflared avec votre compte Cloudflare"},{"location":"configuration_cloudflare/#3-creation-et-configuration-du-tunnel","text":"Cr\u00e9ez un nouveau tunnel : Donnez un nom unique \u00e0 votre tunnel (par exemple, traccar-tunnel ). bash cloudflared tunnel create traccar-tunnel Cette commande va cr\u00e9er le tunnel et g\u00e9n\u00e9rer un ID de tunnel (UUID) et un fichier de configuration pour celui-ci (par exemple, ~/.cloudflared/<UUID>.json ). Cr\u00e9ez un fichier de configuration pour le tunnel ( config.yml ) : Ce fichier indique \u00e0 cloudflared comment acheminer le trafic. Cr\u00e9ez-le dans le m\u00eame r\u00e9pertoire que votre certificat ( ~/.cloudflared/ ) ou dans un r\u00e9pertoire d\u00e9di\u00e9 au tunnel (par exemple, /etc/cloudflared/traccar-tunnel/ ). ```yaml","title":"3. Cr\u00e9ation et configuration du Tunnel"},{"location":"configuration_cloudflare/#cloudflaredconfigyml-ou-etccloudflaredtraccar-tunnelconfigyml","text":"tunnel: credentials-file: /root/.cloudflared/ .json ingress: # R\u00e8gle pour l'interface web de Traccar (port 8082) - hostname: traccar. service: http://localhost:8082 originRequest: noTLSVerify: true # Utilisez cette option si Traccar est en HTTP local # Ou configurez HTTPS sur Traccar si vous avez un certificat local valide # R\u00e8gle pour le port des appareils GPS (ex: OsmAnd sur 5055) # Il faut exposer ce port directement, car Cloudflare ne proxyfie pas les ports non-HTTP/HTTPS par d\u00e9faut # Pour exposer des ports non-HTTP/HTTPS via Tunnel, il faut utiliser Cloudflare Spectrum (payant) # Une solution plus simple est de ne pas proxyfier ce sous-domaine via Cloudflare (nuage gris) - hostname: gps. service: tcp://localhost:5055 # Exemple pour OsmAnd # Si vous exposez directement (sans proxy Cloudflare) ce sous-domaine (gps.YOUR_DOMAIN.COM) # vers votre IP, il n'y a pas besoin de r\u00e8gle d'ingress ici pour le port 5055. # Le tunnel est principalement pour le trafic HTTP/HTTPS. service: http_status:404 ``` Remplacez <YOUR_TUNNEL_UUID> par l'ID de votre tunnel et <YOUR_DOMAIN.COM> par votre nom de domaine.","title":"~/.cloudflared/config.yml ou /etc/cloudflared/traccar-tunnel/config.yml"},{"location":"configuration_cloudflare/#4-configuration-dns-dans-cloudflare","text":"Pour que votre sous-domaine pointe vers votre tunnel, vous devez cr\u00e9er un enregistrement CNAME dans votre tableau de bord Cloudflare. Connectez-vous \u00e0 votre tableau de bord Cloudflare. S\u00e9lectionnez votre nom de domaine. Dans le menu de gauche, allez dans la section DNS . Cliquez sur Ajouter un enregistrement ( Add record ). Type : CNAME Nom : traccar (ou le nom de votre sous-domaine) Cible : L'adresse fournie par cloudflared lors de la cr\u00e9ation du tunnel. Elle se termine g\u00e9n\u00e9ralement par cfargotunnel.com . Par exemple, abcd.cfargotunnel.com . Proxy status : Assurez-vous que le nuage orange est activ\u00e9 (Proxied). Cliquez sur Enregistrer . Note : Si vous exposez des ports non-HTTP/HTTPS (comme 5055 pour les appareils GPS) sans Cloudflare Spectrum, vous devrez cr\u00e9er un enregistrement A pointant directement vers votre IP de serveur pour un sous-domaine comme gps.YOUR_DOMAIN.COM , et vous assurer que ce sous-domaine n'est pas proxyfi\u00e9 (nuage gris).","title":"4. Configuration DNS dans Cloudflare"},{"location":"configuration_cloudflare/#5-execution-de-cloudflared-comme-service-systeme","text":"Pour que votre tunnel reste actif, m\u00eame apr\u00e8s un red\u00e9marrage du serveur, ex\u00e9cutez cloudflared en tant que service syst\u00e8me. Installez le service : bash sudo cloudflared tunnel install D\u00e9marrez le service : bash sudo systemctl start cloudflared V\u00e9rifiez le statut du service : bash sudo systemctl status cloudflared Assurez-vous qu'il d\u00e9marre au boot : bash sudo systemctl enable cloudflared","title":"5. Ex\u00e9cution de cloudflared comme service syst\u00e8me"},{"location":"configuration_cloudflare/#conclusion","text":"Votre serveur Traccar est maintenant accessible de mani\u00e8re s\u00e9curis\u00e9e via Cloudflare Tunnel. Cette configuration offre une couche de s\u00e9curit\u00e9 suppl\u00e9mentaire en masquant l'adresse IP de votre serveur et en utilisant les protections DDoS et le pare-feu applicatif web (WAF) de Cloudflare. N'oubliez pas de mettre \u00e0 jour votre /opt/traccar/conf/traccar.xml pour que Traccar \u00e9coute sur localhost si ce n'est pas d\u00e9j\u00e0 le cas, et configurez vos appareils GPS pour qu'ils pointent vers traccar.<YOUR_DOMAIN.COM> (ou gps.<YOUR_DOMAIN.COM> si vous avez configur\u00e9 un sous-domaine non proxyfi\u00e9 pour les ports non-HTTP/HTTPS).","title":"Conclusion"},{"location":"creation_carte_sim_hologram/","text":"Cr\u00e9ation de carte SIM - Hologram","title":"Cr\u00e9ation de carte SIM - Hologram"},{"location":"creation_carte_sim_hologram/#creation-de-carte-sim-hologram","text":"","title":"Cr\u00e9ation de carte SIM - Hologram"},{"location":"fabrication_traceur_gps/","text":"Fabrication du traceur GPS","title":"Fabrication du traceur GPS"},{"location":"fabrication_traceur_gps/#fabrication-du-traceur-gps","text":"","title":"Fabrication du traceur GPS"},{"location":"installation_traccar/","text":"Installation de Traccar","title":"Installation de Traccar"},{"location":"installation_traccar/#installation-de-traccar","text":"","title":"Installation de Traccar"},{"location":"installation_vehicule/","text":"Installation dans le v\u00e9hicule","title":"Installation dans le v\u00e9hicule"},{"location":"installation_vehicule/#installation-dans-le-vehicule","text":"","title":"Installation dans le v\u00e9hicule"},{"location":"programmation_liligo_a7670g/","text":"Code GPS Tracker - LilyGo A7670G pour Traccar Ce dossier contient le code Arduino pour le module LilyGo A7670G afin d'envoyer les donn\u00e9es GPS au serveur Traccar. \ud83d\udccb Fonctionnalit\u00e9s \u2705 Envoi automatique des donn\u00e9es GPS toutes les 2 minutes \u2705 Serveur Traccar: serveur1d.trackteur.cc:5055 \u2705 Logique de retry avec 3 tentatives en cas d'\u00e9chec \u2705 Sauvegarde automatique sur carte SD si l'envoi \u00e9choue \u2705 Mode veille pour \u00e9conomiser la batterie \u2705 Support GPS/GLONASS/BeiDou/Galileo \u2705 Format CSV pour les donn\u00e9es sauvegard\u00e9es \ud83d\udd27 Pr\u00e9requis Mat\u00e9riel LilyGo T-A7670G (avec GPS int\u00e9gr\u00e9) Carte SIM avec donn\u00e9es mobiles actives Carte microSD (optionnel, pour backup) Antenne GPS Antenne 4G/LTE Logiciel Arduino IDE 1.8.x ou 2.x Biblioth\u00e8que TinyGSM (version fork LilyGo) ESP32 Board Support Package \ud83d\udce6 Installation 1. Installation de l'Arduino IDE T\u00e9l\u00e9chargez et installez Arduino IDE depuis arduino.cc 2. Installation du support ESP32 Ouvrez Arduino IDE Allez dans File > Preferences Dans \"Additional Board Manager URLs\", ajoutez: https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json Allez dans Tools > Board > Boards Manager Recherchez \"ESP32\" et installez \"esp32 by Espressif Systems\" 3. Installation de la biblioth\u00e8que TinyGSM \u26a0\ufe0f IMPORTANT : Utilisez la version fork de LilyGo, pas la version standard! T\u00e9l\u00e9chargez le d\u00e9p\u00f4t: https://github.com/Xinyuan-LilyGO/LilyGO-T-A76XX Copiez tous les dossiers du r\u00e9pertoire lib vers le dossier Arduino libraries: Windows: C:\\Users\\[VotreNom]\\Documents\\Arduino\\libraries\\ Mac: ~/Documents/Arduino/libraries/ Linux: ~/Arduino/libraries/ Les biblioth\u00e8ques n\u00e9cessaires sont: - TinyGSM (fork LilyGo) - StreamDebugger (si DUMP_AT_COMMANDS est activ\u00e9) 4. Configuration du code Ouvrez le fichier TraccarGPS.ino et modifiez les param\u00e8tres suivants: // ID unique de votre appareil (OBLIGATOIRE) const char *client_id = \"DEVICE_ID_001\"; // Remplacez par un ID unique // URL du serveur Traccar (d\u00e9j\u00e0 configur\u00e9) const char *request_url = \"http://serveur1d.trackteur.cc:5055\"; // APN de votre op\u00e9rateur (si n\u00e9cessaire) // D\u00e9commentez et modifiez selon votre op\u00e9rateur: // #define NETWORK_APN \"internet\" // Orange/Sosh // #define NETWORK_APN \"free\" // Free Mobile // #define NETWORK_APN \"sl2sfr\" // SFR // #define NETWORK_APN \"mmsbouygtel.com\" // Bouygues 5. Configuration de la carte dans Arduino IDE Connectez la carte LilyGo A7670G via USB Dans Arduino IDE: Tools > Board > ESP32 Arduino > ESP32 Dev Module Tools > Port > S\u00e9lectionnez le port COM correspondant Tools > Upload Speed > 115200 Tools > Flash Size > 4MB (32Mb) Tools > Partition Scheme > Default 4MB with spiffs 6. Compilation et t\u00e9l\u00e9versement V\u00e9rifiez le code: Cliquez sur \u2713 (Verify) T\u00e9l\u00e9versez: Cliquez sur \u2192 (Upload) Ouvrez le moniteur s\u00e9rie: Tools > Serial Monitor Configurez le baud rate \u00e0 115200 \ud83d\udcca Format des donn\u00e9es Donn\u00e9es envoy\u00e9es \u00e0 Traccar Le code envoie les donn\u00e9es au format Traccar OsmAnd protocol: http://serveur1d.trackteur.cc:5055/?id=DEVICE_ID&lat=48.8566&lon=2.3522&speed=15.5&altitude=35.2&bearing=270&timestamp=2025-12-08T10:30:00Z&hdop=1.2&batt=100 Donn\u00e9es sauvegard\u00e9es sur SD (CSV) Format du fichier gps_data.csv : timestamp,latitude,longitude,speed,altitude,bearing,hdop 2025-12-08 10:30:00,48.8566000,2.3522000,15.50,35.20,270.00,1.20 \ud83d\udd0d Diagnostic LED de statut LED allum\u00e9e: GPS en cours de lecture LED \u00e9teinte: Mode veille Moniteur s\u00e9rie Le moniteur s\u00e9rie affiche: - \u00c9tat du modem (d\u00e9marrage, enregistrement r\u00e9seau) - \u00c9tat de la carte SIM - Qualit\u00e9 du signal - Donn\u00e9es GPS re\u00e7ues - R\u00e9sultat des envois HTTP - Sauvegarde sur SD Messages d'erreur courants Erreur Solution No SD card attached V\u00e9rifiez que la carte SD est bien ins\u00e9r\u00e9e Network registration denied V\u00e9rifiez l'APN et que la carte SIM a un forfait data actif HTTP request failed! Error code: XXX V\u00e9rifiez la connexion r\u00e9seau et l'URL du serveur GPS fix not available Placez l'antenne GPS \u00e0 l'ext\u00e9rieur ou pr\u00e8s d'une fen\u00eatre SIM card locked D\u00e9verrouillez la carte SIM (retirez le code PIN) \ud83d\udce1 Configuration Traccar Ajout de l'appareil sur le serveur Connectez-vous \u00e0 votre serveur Traccar: http://serveur1d.trackteur.cc Allez dans Settings > Devices > Add Device Configurez: Name : Nom de votre tracker Identifier : L'ID que vous avez mis dans client_id (ex: DEVICE_ID_001) Group : (optionnel) Cliquez sur Add V\u00e9rification de la r\u00e9ception Dans Traccar, s\u00e9lectionnez votre appareil Vous devriez voir la position mise \u00e0 jour toutes les 2 minutes Consultez les logs pour voir les donn\u00e9es re\u00e7ues \u26a1 Consommation d'\u00e9nergie Lecture GPS + Envoi : ~350-500 mA Mode veille : ~2-3 mA Cycle complet (2 min) : Moyenne ~5-10 mA \ud83d\udca1 Pour une batterie de 3000 mAh, autonomie estim\u00e9e: 12-25 jours \ud83d\udee0\ufe0f Personnalisation Modifier l'intervalle d'envoi #define REPORT_LOCATION_RATE_SECOND 120 // 120 = 2 minutes Modifier le nombre de retry #define MAX_RETRY_ATTEMPTS 3 // Nombre de tentatives D\u00e9sactiver la sauvegarde SD #define USE_SD_CARD false Activer le debug AT D\u00e9commentez pour voir toutes les commandes AT: #define DUMP_AT_COMMANDS \ud83d\udcdd Structure du projet code/ \u251c\u2500\u2500 README.md # Ce fichier \u2514\u2500\u2500 TraccarGPS/ \u251c\u2500\u2500 TraccarGPS.ino # Code principal \u2514\u2500\u2500 utilities.h # Configuration des pins \ud83d\udd12 S\u00e9curit\u00e9 \u26a0\ufe0f Important : - Ne partagez pas votre client_id publiquement - Utilisez un ID unique pour chaque appareil - Changez les identifiants par d\u00e9faut \ud83c\udd98 Support Pour obtenir de l'aide: 1. V\u00e9rifiez les messages du moniteur s\u00e9rie 2. Consultez la documentation LilyGo: https://github.com/Xinyuan-LilyGO/LilyGO-T-A76XX 3. Documentation Traccar: https://www.traccar.org/osmand/ \ud83d\udcc4 Licence MIT License - Libre d'utilisation et de modification \ud83d\udd04 Changelog Version 1.0 (2025-12-08) Envoi initial vers serveur1d.trackteur.cc Support carte SD avec sauvegarde CSV Logique de retry (3 tentatives) Intervalle de 2 minutes Mode veille pour \u00e9conomie d'\u00e9nergie","title":"Programmation du Liligo A7670G"},{"location":"programmation_liligo_a7670g/#code-gps-tracker-lilygo-a7670g-pour-traccar","text":"Ce dossier contient le code Arduino pour le module LilyGo A7670G afin d'envoyer les donn\u00e9es GPS au serveur Traccar.","title":"Code GPS Tracker - LilyGo A7670G pour Traccar"},{"location":"programmation_liligo_a7670g/#fonctionnalites","text":"\u2705 Envoi automatique des donn\u00e9es GPS toutes les 2 minutes \u2705 Serveur Traccar: serveur1d.trackteur.cc:5055 \u2705 Logique de retry avec 3 tentatives en cas d'\u00e9chec \u2705 Sauvegarde automatique sur carte SD si l'envoi \u00e9choue \u2705 Mode veille pour \u00e9conomiser la batterie \u2705 Support GPS/GLONASS/BeiDou/Galileo \u2705 Format CSV pour les donn\u00e9es sauvegard\u00e9es","title":"\ud83d\udccb Fonctionnalit\u00e9s"},{"location":"programmation_liligo_a7670g/#prerequis","text":"","title":"\ud83d\udd27 Pr\u00e9requis"},{"location":"programmation_liligo_a7670g/#materiel","text":"LilyGo T-A7670G (avec GPS int\u00e9gr\u00e9) Carte SIM avec donn\u00e9es mobiles actives Carte microSD (optionnel, pour backup) Antenne GPS Antenne 4G/LTE","title":"Mat\u00e9riel"},{"location":"programmation_liligo_a7670g/#logiciel","text":"Arduino IDE 1.8.x ou 2.x Biblioth\u00e8que TinyGSM (version fork LilyGo) ESP32 Board Support Package","title":"Logiciel"},{"location":"programmation_liligo_a7670g/#installation","text":"","title":"\ud83d\udce6 Installation"},{"location":"programmation_liligo_a7670g/#1-installation-de-larduino-ide","text":"T\u00e9l\u00e9chargez et installez Arduino IDE depuis arduino.cc","title":"1. Installation de l'Arduino IDE"},{"location":"programmation_liligo_a7670g/#2-installation-du-support-esp32","text":"Ouvrez Arduino IDE Allez dans File > Preferences Dans \"Additional Board Manager URLs\", ajoutez: https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json Allez dans Tools > Board > Boards Manager Recherchez \"ESP32\" et installez \"esp32 by Espressif Systems\"","title":"2. Installation du support ESP32"},{"location":"programmation_liligo_a7670g/#3-installation-de-la-bibliotheque-tinygsm","text":"\u26a0\ufe0f IMPORTANT : Utilisez la version fork de LilyGo, pas la version standard! T\u00e9l\u00e9chargez le d\u00e9p\u00f4t: https://github.com/Xinyuan-LilyGO/LilyGO-T-A76XX Copiez tous les dossiers du r\u00e9pertoire lib vers le dossier Arduino libraries: Windows: C:\\Users\\[VotreNom]\\Documents\\Arduino\\libraries\\ Mac: ~/Documents/Arduino/libraries/ Linux: ~/Arduino/libraries/ Les biblioth\u00e8ques n\u00e9cessaires sont: - TinyGSM (fork LilyGo) - StreamDebugger (si DUMP_AT_COMMANDS est activ\u00e9)","title":"3. Installation de la biblioth\u00e8que TinyGSM"},{"location":"programmation_liligo_a7670g/#4-configuration-du-code","text":"Ouvrez le fichier TraccarGPS.ino et modifiez les param\u00e8tres suivants: // ID unique de votre appareil (OBLIGATOIRE) const char *client_id = \"DEVICE_ID_001\"; // Remplacez par un ID unique // URL du serveur Traccar (d\u00e9j\u00e0 configur\u00e9) const char *request_url = \"http://serveur1d.trackteur.cc:5055\"; // APN de votre op\u00e9rateur (si n\u00e9cessaire) // D\u00e9commentez et modifiez selon votre op\u00e9rateur: // #define NETWORK_APN \"internet\" // Orange/Sosh // #define NETWORK_APN \"free\" // Free Mobile // #define NETWORK_APN \"sl2sfr\" // SFR // #define NETWORK_APN \"mmsbouygtel.com\" // Bouygues","title":"4. Configuration du code"},{"location":"programmation_liligo_a7670g/#5-configuration-de-la-carte-dans-arduino-ide","text":"Connectez la carte LilyGo A7670G via USB Dans Arduino IDE: Tools > Board > ESP32 Arduino > ESP32 Dev Module Tools > Port > S\u00e9lectionnez le port COM correspondant Tools > Upload Speed > 115200 Tools > Flash Size > 4MB (32Mb) Tools > Partition Scheme > Default 4MB with spiffs","title":"5. Configuration de la carte dans Arduino IDE"},{"location":"programmation_liligo_a7670g/#6-compilation-et-televersement","text":"V\u00e9rifiez le code: Cliquez sur \u2713 (Verify) T\u00e9l\u00e9versez: Cliquez sur \u2192 (Upload) Ouvrez le moniteur s\u00e9rie: Tools > Serial Monitor Configurez le baud rate \u00e0 115200","title":"6. Compilation et t\u00e9l\u00e9versement"},{"location":"programmation_liligo_a7670g/#format-des-donnees","text":"","title":"\ud83d\udcca Format des donn\u00e9es"},{"location":"programmation_liligo_a7670g/#donnees-envoyees-a-traccar","text":"Le code envoie les donn\u00e9es au format Traccar OsmAnd protocol: http://serveur1d.trackteur.cc:5055/?id=DEVICE_ID&lat=48.8566&lon=2.3522&speed=15.5&altitude=35.2&bearing=270&timestamp=2025-12-08T10:30:00Z&hdop=1.2&batt=100","title":"Donn\u00e9es envoy\u00e9es \u00e0 Traccar"},{"location":"programmation_liligo_a7670g/#donnees-sauvegardees-sur-sd-csv","text":"Format du fichier gps_data.csv : timestamp,latitude,longitude,speed,altitude,bearing,hdop 2025-12-08 10:30:00,48.8566000,2.3522000,15.50,35.20,270.00,1.20","title":"Donn\u00e9es sauvegard\u00e9es sur SD (CSV)"},{"location":"programmation_liligo_a7670g/#diagnostic","text":"","title":"\ud83d\udd0d Diagnostic"},{"location":"programmation_liligo_a7670g/#led-de-statut","text":"LED allum\u00e9e: GPS en cours de lecture LED \u00e9teinte: Mode veille","title":"LED de statut"},{"location":"programmation_liligo_a7670g/#moniteur-serie","text":"Le moniteur s\u00e9rie affiche: - \u00c9tat du modem (d\u00e9marrage, enregistrement r\u00e9seau) - \u00c9tat de la carte SIM - Qualit\u00e9 du signal - Donn\u00e9es GPS re\u00e7ues - R\u00e9sultat des envois HTTP - Sauvegarde sur SD","title":"Moniteur s\u00e9rie"},{"location":"programmation_liligo_a7670g/#messages-derreur-courants","text":"Erreur Solution No SD card attached V\u00e9rifiez que la carte SD est bien ins\u00e9r\u00e9e Network registration denied V\u00e9rifiez l'APN et que la carte SIM a un forfait data actif HTTP request failed! Error code: XXX V\u00e9rifiez la connexion r\u00e9seau et l'URL du serveur GPS fix not available Placez l'antenne GPS \u00e0 l'ext\u00e9rieur ou pr\u00e8s d'une fen\u00eatre SIM card locked D\u00e9verrouillez la carte SIM (retirez le code PIN)","title":"Messages d'erreur courants"},{"location":"programmation_liligo_a7670g/#configuration-traccar","text":"","title":"\ud83d\udce1 Configuration Traccar"},{"location":"programmation_liligo_a7670g/#ajout-de-lappareil-sur-le-serveur","text":"Connectez-vous \u00e0 votre serveur Traccar: http://serveur1d.trackteur.cc Allez dans Settings > Devices > Add Device Configurez: Name : Nom de votre tracker Identifier : L'ID que vous avez mis dans client_id (ex: DEVICE_ID_001) Group : (optionnel) Cliquez sur Add","title":"Ajout de l'appareil sur le serveur"},{"location":"programmation_liligo_a7670g/#verification-de-la-reception","text":"Dans Traccar, s\u00e9lectionnez votre appareil Vous devriez voir la position mise \u00e0 jour toutes les 2 minutes Consultez les logs pour voir les donn\u00e9es re\u00e7ues","title":"V\u00e9rification de la r\u00e9ception"},{"location":"programmation_liligo_a7670g/#consommation-denergie","text":"Lecture GPS + Envoi : ~350-500 mA Mode veille : ~2-3 mA Cycle complet (2 min) : Moyenne ~5-10 mA \ud83d\udca1 Pour une batterie de 3000 mAh, autonomie estim\u00e9e: 12-25 jours","title":"\u26a1 Consommation d'\u00e9nergie"},{"location":"programmation_liligo_a7670g/#personnalisation","text":"","title":"\ud83d\udee0\ufe0f Personnalisation"},{"location":"programmation_liligo_a7670g/#modifier-lintervalle-denvoi","text":"#define REPORT_LOCATION_RATE_SECOND 120 // 120 = 2 minutes","title":"Modifier l'intervalle d'envoi"},{"location":"programmation_liligo_a7670g/#modifier-le-nombre-de-retry","text":"#define MAX_RETRY_ATTEMPTS 3 // Nombre de tentatives","title":"Modifier le nombre de retry"},{"location":"programmation_liligo_a7670g/#desactiver-la-sauvegarde-sd","text":"#define USE_SD_CARD false","title":"D\u00e9sactiver la sauvegarde SD"},{"location":"programmation_liligo_a7670g/#activer-le-debug-at","text":"D\u00e9commentez pour voir toutes les commandes AT: #define DUMP_AT_COMMANDS","title":"Activer le debug AT"},{"location":"programmation_liligo_a7670g/#structure-du-projet","text":"code/ \u251c\u2500\u2500 README.md # Ce fichier \u2514\u2500\u2500 TraccarGPS/ \u251c\u2500\u2500 TraccarGPS.ino # Code principal \u2514\u2500\u2500 utilities.h # Configuration des pins","title":"\ud83d\udcdd Structure du projet"},{"location":"programmation_liligo_a7670g/#securite","text":"\u26a0\ufe0f Important : - Ne partagez pas votre client_id publiquement - Utilisez un ID unique pour chaque appareil - Changez les identifiants par d\u00e9faut","title":"\ud83d\udd12 S\u00e9curit\u00e9"},{"location":"programmation_liligo_a7670g/#support","text":"Pour obtenir de l'aide: 1. V\u00e9rifiez les messages du moniteur s\u00e9rie 2. Consultez la documentation LilyGo: https://github.com/Xinyuan-LilyGO/LilyGO-T-A76XX 3. Documentation Traccar: https://www.traccar.org/osmand/","title":"\ud83c\udd98 Support"},{"location":"programmation_liligo_a7670g/#licence","text":"MIT License - Libre d'utilisation et de modification","title":"\ud83d\udcc4 Licence"},{"location":"programmation_liligo_a7670g/#changelog","text":"","title":"\ud83d\udd04 Changelog"},{"location":"programmation_liligo_a7670g/#version-10-2025-12-08","text":"Envoi initial vers serveur1d.trackteur.cc Support carte SD avec sauvegarde CSV Logique de retry (3 tentatives) Intervalle de 2 minutes Mode veille pour \u00e9conomie d'\u00e9nergie","title":"Version 1.0 (2025-12-08)"}]}